<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8"/>
	<title>Kakao 지도 시작하기</title>
</head>
<body>
	<!-- <h1>Map Test</h1>
	<div th:if="${area != null}">
		<div>Latitude: <span th:text="${area.localPosition.lng}"></span></div>
		<div>Longitude: <span th:text="${area.localPosition.lng}"></span></div>
	</div> -->
	
	
	 <h1>Motel Test</h1>
	<div th:if="${hotels != null}">
		<div>Latitude: <span th:text="${hotels.localPosition.lng}"></span></div>
		<div>Longitude: <span th:text="${hotels.localPosition.lng}"></span></div>
	</div> 

	<div id="map" style="width:500px;height:400px;"></div>
	<script th:src="'//dapi.kakao.com/v2/maps/sdk.js?appkey=' + 'bad2312ffcb2c3e1eef6908fa8571488'"></script>

	<script th:inline="javascript">
	var lat = /*[[${area.localPosition.lat}]]*/ null;
	var lng = /*[[${area.localPosition.lng}]]*/ null;
		var container = document.getElementById('map');
		var options = {
			center: new kakao.maps.LatLng(lat, lng), 
			level: 9
		};
		var map = new kakao.maps.Map(container, options);
		
		
		
		
		// 마커를 표시할 위치와 내용을 가지고 있는 객체 배열입니다 
		var positions = [
		    {
		        content: '<div>카카오</div>', 
		        latlng: new kakao.maps.LatLng(33.450705, 126.570677)
		    },
		    {
		        content: '<div>생태연못</div>', 
		        latlng: new kakao.maps.LatLng(33.450936, 126.569477)
		    },
		    {
		        content: '<div>텃밭</div>', 
		        latlng: new kakao.maps.LatLng(33.450879, 126.569940)
		    },
		    {
		        content: '<div>근린공원</div>',
		        latlng: new kakao.maps.LatLng(33.451393, 126.570738)
		    }
		];
		
		for (var i = 0; i < positions.length; i ++) {
		    // 마커를 생성합니다
		    var marker = new kakao.maps.Marker({
		        map: map, // 마커를 표시할 지도
		        position: positions[i].latlng // 마커의 위치
		    });

		    // 마커에 표시할 인포윈도우를 생성합니다 
		    var infowindow = new kakao.maps.InfoWindow({
		        content: positions[i].content // 인포윈도우에 표시할 내용
		    });

		    // 마커에 이벤트를 등록하는 함수 만들고 즉시 호출하여 클로저를 만듭니다
		    // 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
		    (function(marker, infowindow) {
		        // 마커에 mouseover 이벤트를 등록하고 마우스 오버 시 인포윈도우를 표시합니다 
		        kakao.maps.event.addListener(marker, 'mouseover', function() {
		            infowindow.open(map, marker);
		        });

		        // 마커에 mouseout 이벤트를 등록하고 마우스 아웃 시 인포윈도우를 닫습니다
		        kakao.maps.event.addListener(marker, 'mouseout', function() {
		            infowindow.close();
		        });
		    })(marker, infowindow);
		}

		
	</script>
</body>
</html>